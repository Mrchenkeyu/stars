package com.stars.modules.title.prodata;import com.stars.core.attr.Attribute;import com.stars.core.attr.FormularUtils;import com.stars.modules.title.TitleManager;import com.stars.network.server.buffer.NewByteBuffer;import com.stars.util.DateUtil;import com.stars.util.StringUtil;/** * Created by liuyuheng on 2016/7/21. */public class TitleVo {    private int titleId;// '称号id'    private byte type;// '类型'    private String name;// '名称索引'    private String titleAtt;// '属性'    private String useTime;// '使用时间'    private String titleFrom;//    private String titleIcon;// '资源名称'    private byte iconType;// '类型:1静态2动态'    private int titleHigh;// '头像高度'    private int sceneSize;// '缩放比例(百分比)'    private int reqrolelevel;//需要角色达到指定等级    private int reqviplevel;//账号需要达到指定贵族等级    private String resolve;    /* 内存数据 */    private int fightPower;// 可增加战力    private Attribute attribute = new Attribute();// 称号属性    private byte useTimeType = 0;// 0=不限;1=时间长度;2=指定时间点    private long time = 0;// 使用时间//    private Map<Integer, Integer> resolveMap = new HashMap<>();    private int itemId;    private int itemCount;    public TitleVo() {    }    public void writeToBuff(NewByteBuffer buff) {        buff.writeInt(titleId);        buff.writeString(titleAtt);        buff.writeString(useTime);        buff.writeInt(fightPower);    }    public int getFightPower() {        return fightPower;    }    public Attribute getAttribute() {        return attribute;    }    public byte getUseTimeType() {        return useTimeType;    }    public long getTime() {        return time;    }    public int getTitleId() {        return titleId;    }    public void setTitleId(int titleId) {        this.titleId = titleId;    }    public byte getType() {        return type;    }    public void setType(byte type) {        this.type = type;    }    public String getName() {        return name;    }    public void setName(String name) {        this.name = name;    }    public String getTitleAtt() {        return titleAtt;    }    public void setTitleAtt(String titleAtt) {        this.titleAtt = titleAtt;        if (StringUtil.isEmpty(titleAtt) || "0".equals(titleAtt)) {            return;        }        attribute = new Attribute(titleAtt);        this.fightPower = FormularUtils.calFightScore(attribute);    }    public String getUseTime() {        return useTime;    }    public void setUseTime(String useTime) {        this.useTime = useTime;        if (StringUtil.isEmpty(useTime) || "0".equals(useTime)) {            return;        }        String[] temp = useTime.split("\\|");        this.useTimeType = Byte.parseByte(temp[0]);        switch (useTimeType) {            case TitleManager.TIME_TYPE_SPELLTIME:                String[] timeStr = temp[1].split("\\+");                this.time = (Long.parseLong(timeStr[0]) * 24 * 3600 + Long.parseLong(timeStr[1]) * 3600 +                        Long.parseLong(timeStr[2]) * 60 + Long.parseLong(timeStr[3])) * 1000;                break;            case TitleManager.TIME_TYPE_TIMEOVER:                this.time = DateUtil.parseDateTime(temp[1]);                break;            default:                break;        }    }    public String getTitleFrom() {        return titleFrom;    }    public void setTitleFrom(String titleFrom) {        this.titleFrom = titleFrom;    }    public String getTitleIcon() {        return titleIcon;    }    public void setTitleIcon(String titleIcon) {        this.titleIcon = titleIcon;    }    public byte getIconType() {        return iconType;    }    public void setIconType(byte iconType) {        this.iconType = iconType;    }    public int getTitleHigh() {        return titleHigh;    }    public void setTitleHigh(int titleHigh) {        this.titleHigh = titleHigh;    }    public int getSceneSize() {        return sceneSize;    }    public void setSceneSize(int sceneSize) {        this.sceneSize = sceneSize;    }    public int getReqrolelevel() {        return reqrolelevel;    }    public void setReqrolelevel(int reqrolelevel) {        this.reqrolelevel = reqrolelevel;    }    public int getReqviplevel() {        return reqviplevel;    }    public void setReqviplevel(int reqviplevel) {        this.reqviplevel = reqviplevel;    }    public String getResolve() {        return resolve;    }    public void setResolve(String resolve) {        this.resolve = resolve;        if (resolve == null || resolve.equals("") || resolve.equals("0")) return;//        this.resolveMap = StringUtil.toMap(resolve, Integer.class, Integer.class, '+', '|');        String[] tmp = resolve.split("\\+");        this.itemId = Integer.parseInt(tmp[0]);        this.itemCount = Integer.parseInt(tmp[1]);    }    public int getItemId() {        return itemId;    }    public int getItemCount() {        return itemCount;    }    public boolean checkCondition(int rolelevel, int vipLevel) {        if (rolelevel >= reqrolelevel || vipLevel >= reqviplevel) {            return true;        }        return false;    }}